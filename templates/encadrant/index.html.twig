{% extends 'base.html.twig' %}

{% block title 'Encadrants' %}

{% block body %}

<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<section class="content">
      <div class="container-fluid">
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Liste des Encadrants</h3>
              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <table id="stagiaires-table" class="table table-bordered table-hover">
                  <thead>
        <tr>
            <th data-order="nomEncadrant">Nom</th>
            <th data-order="prenomEncadrant">Prénom</th>
            <th data-order="cinEncadrant">Numéro CIN</th>
            <th data-order="emailEncadrant">Email</th>
            <th data-order="mobileEncadrant">Mobile</th>
            <th>Stagiaires</th>
            <th>Actions</th>
        </tr>
         </thead>

            <tbody>


        
        {% for encadrant in encadrants %}
            <div class="col-md-4">
                <tr>
                    <th>{{encadrant.nomEncadrant}}</th>
                    <th>{{encadrant.prenomEncadrant}}</th>
                    <th>{{encadrant.cinEncadrant}}</th>
                    <th>{{encadrant.emailEncadrant}}</th>
                    <th>{{encadrant.mobileEncadrant}}</th>
                    <th>
                        <a href="{{path('app_encadrant_stagiaires' , {id: encadrant.id})}}" class='btn btn-info'>Voir les Stagiaires</a>
                    
                    </th>

                    


                    <th >
                        <div class='mx-auto'>
                        
                        <a href="{{path('app_encadrant_edit' , {id: encadrant.id})}}" class='btn btn-success'>Modifier</a>
                        
                        <a href="#" onclick="event.preventDefault(); showDeleteConfirmation({{ encadrant.id }});" class="btn btn-danger">Supprimer</a>
                        <div class="modal" id="delete-confirmation-modal-{{ encadrant.id }}">
                            <div class="modal-content">
                                <p>Êtes-vous sûr de vouloir supprimer cet encadrant ?</p>
                                <div class="modal-buttons">
                                    <button class="btn btn-danger" onclick="confirmDelete({{ encadrant.id }});">Yes</button>
                                    <button class="btn btn-secondary" onclick="cancelDelete({{ encadrant.id }});">No</button>
                                </div>
                            </div>
                        </div>

                        <form id="encadrant-delete-form-{{ encadrant.id }}" action="{{ path('app_encadrant_delete', {id: encadrant.id}) }}" method="post" style="display: none;">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token('encadrant_deletion_' ~ encadrant.id) }}">
                            <input type="hidden" name="_method" value="DELETE">
                        </form>
                  

                        </div>

                    </th>
                    
                </tr>

              
            </div>
            
        {% endfor %}
        </tbody>

 <script>
    $(document).ready(function() {
        $('#stagiaires-table').DataTable({
            "columnDefs": [
                { "orderable": false, "targets": [5] } // The column number (zero-based) you want to disable sorting on
            ]
        });
    });


    function showDeleteConfirmation(encadrantId) {
    const modal = document.getElementById('delete-confirmation-modal-' + encadrantId);
    modal.style.display = 'block';
}

function confirmDelete(encadrantId) {
    const modal = document.getElementById('delete-confirmation-modal-' + encadrantId);
    modal.style.display = 'none';

    // Submit the delete form
    const form = document.getElementById('encadrant-delete-form-' + encadrantId);
    form.submit();
}

function cancelDelete(encadrantId) {
    const modal = document.getElementById('delete-confirmation-modal-' + encadrantId);
    modal.style.display = 'none';
}
</script>





{% endblock %}
